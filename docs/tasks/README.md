# 작업 분해 가이드

이 문서는 큰 기능을 **작고 실행 가능한 작업 단위로 분해하기 위한 가이드**이다.

---

## 1. 작업 분해의 목적

작업 분해는 다음을 위해 수행한다:

- 리스크 최소화: 작은 단위로 빠른 검증
- 진행 상황 가시화: 정확한 진행률 파악
- 빠른 피드백: 매일 동작하는 결과물
- 팀 협업: 병렬 작업 가능

작업 분해는 **"무엇을 만들까"가 아니라 "어떤 순서로 만들까"**를 결정하는 과정이다.

---

## 2. 언제 작업 분해를 하는가

다음 문서가 완성된 후:

- ✅ PRD (요구사항)
- ✅ Tech Stack (기술 선택)
- ✅ Architecture (시스템 설계)

작업 분해는 **구현 시작 직전**에 수행한다.

---

## 3. 작업 분해 원칙

### 3.1 INVEST 원칙

각 작업은 다음을 만족해야 함:

```
✅ Independent (독립적)
   - 다른 작업 의존 최소
   - 순서 변경 가능

✅ Negotiable (협상 가능)
   - 구현 방법은 유연
   - 목표만 명확

✅ Valuable (가치 있음)
   - 그 자체로 의미
   - 동작하는 결과물

✅ Estimable (추정 가능)
   - 4-8시간 정도
   - 1일 이내

✅ Small (작음)
   - 하루 안에 완료
   - 한 사람이 수행

✅ Testable (테스트 가능)
   - 명확한 완료 기준
   - 자동 테스트 작성 가능
```

### 3.2 크기 기준

```
✅ 적절한 크기: 4-8시간 (1일 이내)
⚠️ 너무 큼: 2-3일 → 더 분해 필요
⚠️ 너무 작음: 30분 이하 → 병합 고려
```

### 3.3 Vertical Slice (수직 분할)

```
✅ 좋은 분할 (수직):
Task: "로그인 기능"
├── Frontend: 로그인 폼
├── Backend: 인증 API
├── Database: users 테이블
└── 테스트: 전체 플로우

→ End-to-End 동작
→ 실제 가치 제공

❌ 나쁜 분할 (수평):
Task 1: 모든 Frontend
Task 2: 모든 Backend
Task 3: 모든 Database

→ 개별적으로 무의미
→ 통합 시 문제 폭발
```

---

## 4. 작업 분해 프로세스

### Step 1: Epic 정의

```
Epic: 큰 기능 단위 (PRD의 Phase와 유사)

예시:
- Epic 1: 기본 인프라 구축
- Epic 2: 문서 처리 파이프라인
- Epic 3: 검색 기능 구현
```

### Step 2: User Story 작성

```
As a [사용자]
I want to [행동]
So that [목적]

예시:
As a 개발자
I want to PDF 파일을 업로드
So that 문서를 검색 가능하게 인덱싱할 수 있다
```

### Step 3: Task 분해

```
각 User Story를:
- 4-8시간 작업으로 분해
- 기술적 단계로 세분화
- 의존성 고려

예시:
Epic: 문서 처리
└── Story: PDF 인덱싱
    ├── Task 1: PDF 파서 (6h)
    ├── Task 2: 텍스트 청킹 (4h)
    └── Task 3: 벡터화 (6h)
```

### Step 4: Acceptance Criteria 정의

```
각 Task마다 명확한 완료 기준:

Task: PDF 파서
- [ ] PyPDF2로 텍스트 추출
- [ ] 샘플 PDF 3개 파싱 성공
- [ ] 에러 핸들링 (손상된 PDF)
- [ ] 단위 테스트 작성
```

### Step 5: 의존성 분석

```
Task 간 의존성 파악:

Task 1.1: DB 스키마 생성
  ↓ (의존)
Task 1.2: ORM 모델 생성
  ↓ (의존)
Task 1.3: API 엔드포인트

→ 순서대로 진행 필요
```

### Step 6: 우선순위 설정

```
P0: 필수 (Must-Have)
P1: 중요 (Should-Have)
P2: 선택 (Nice-to-Have)

P0부터 순서대로 진행
```

---

## 5. 작업 구조

### 계층 구조

```
Epic (1-2주)
└── User Story (2-3일)
    └── Task (4-8시간)
        └── Subtask (1-2시간, 선택)
```

### 예시

```
Epic 1: 기본 인프라 (1주)
├── Story 1.1: 벡터 DB 설정 (1일)
│   ├── Task 1.1.1: Pinecone 계정 (2h)
│   ├── Task 1.1.2: 연결 테스트 (4h)
│   └── Task 1.1.3: 인덱스 생성 (2h)
├── Story 1.2: LLM API 연동 (1일)
│   ├── Task 1.2.1: API 키 설정 (1h)
│   ├── Task 1.2.2: 임베딩 테스트 (3h)
│   └── Task 1.2.3: 에러 처리 (4h)
└── Story 1.3: 데이터베이스 (1일)
    ├── Task 1.3.1: Docker Compose (2h)
    ├── Task 1.3.2: 스키마 생성 (4h)
    └── Task 1.3.3: Migration (2h)
```

---

## 6. Definition of Done (완료 기준)

각 Task는 다음을 완료해야 함:

```
✅ 코드 작성
✅ 단위 테스트 작성 및 통과
✅ 통합 테스트 (필요 시)
✅ 코드 리뷰 완료
✅ 문서화 (docstring, README)
✅ CI 테스트 통과
✅ Main 브랜치 병합
```

---

## 7. 템플릿 사용

작업 분해 시 `TEMPLATE.md`를 사용한다:

- Epic, User Story, Task 구조
- Acceptance Criteria 체크리스트
- 의존성 및 우선순위 명시

---

## 8. 실행 워크플로우

### Daily

```
Morning:
1. 오늘 Task 선택
2. 브랜치 생성
3. 테스트 작성

Afternoon:
4. 구현
5. 테스트 실행
6. PR 생성

Evening:
7. 코드 리뷰
8. Merge
9. 다음 Task 계획
```

### Weekly

```
매주 금요일:
1. 완료 Task 리뷰
2. 진행률 확인
3. 다음 주 계획
4. 리스크 점검
5. 데모
```

---

## 9. 주의사항

### DO ✅

- Task는 4-8시간 크기
- Vertical Slice 우선
- 명확한 완료 기준
- 매 Task 테스트
- 의존성 고려

### DON'T ❌

- 너무 크게 분해 (2-3일)
- 수평 분할 (레이어별)
- 애매한 완료 기준
- 테스트 생략
- 의존성 무시

---

## 10. 최종 원칙

작업 분해는 **"빠르게 실패하고, 빠르게 배우기"** 위한 도구다.

- 작은 단위로 검증
- 매일 동작하는 결과물
- 리스크 조기 발견
- 빠른 피드백 사이클